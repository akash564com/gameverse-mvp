<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Snake</title><style>body{margin:0;background:#111;color:#eee;font-family:system-ui}canvas{display:block;margin:20px auto;background:#000;max-width:95vw;height:auto;border:1px solid #333}</style></head>
<body><canvas id="c" width="600" height="400"></canvas><div style="text-align:center">Score: <span id="score">0</span></div>
<script>
const cvs=document.getElementById('c'),ctx=cvs.getContext('2d'),grid=20;let vx=1,vy=0,snake=[{x:10,y:10}],apple={x:15,y:10},score=0,dead=false;
function rnd(n){return Math.floor(Math.random()*n)};function placeApple(){apple.x=rnd(cvs.width/grid);apple.y=rnd(cvs.height/grid);}
window.addEventListener('keydown',e=>{const k=e.key.toLowerCase();if((k==='arrowup'||k==='w')&&vy!==1){vx=0;vy=-1}if((k==='arrowdown'||k==='s')&&vy!==-1){vx=0;vy=1}if((k==='arrowleft'||k==='a')&&vx!==1){vx=-1;vy=0}if((k==='arrowright'||k==='d')&&vx!==-1){vx=1;vy=0}});
function step(){if(dead)return;const head={x:snake[0].x+vx,y:snake[0].y+vy};head.x=(head.x+cvs.width/grid)%(cvs.width/grid);head.y=(head.y+cvs.height/grid)%(cvs.height/grid);
if(snake.some(s=>s.x===head.x&&s.y===head.y)){dead=true;submitScore();return}snake.unshift(head);
if(head.x===apple.x&&head.y===apple.y){score+=10;document.getElementById('score').textContent=score;placeApple()}else snake.pop();
ctx.clearRect(0,0,cvs.width,cvs.height);ctx.fillStyle='#0f0';snake.forEach(s=>ctx.fillRect(s.x*grid,s.y*grid,grid-2,grid-2));ctx.fillStyle='#f00';ctx.fillRect(apple.x*grid,apple.y*grid,grid-2,grid-2);}
async function submitScore(){try{await fetch('/api/scores',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({slug:'snake',score})});}catch(e){}}
placeApple();setInterval(step,90);
</script></body></html>
